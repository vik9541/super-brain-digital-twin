# üöÄ Victor Bot v2.0 - –ó–∞–ø—É—Å–∫ –∑–∞ 5 –º–∏–Ω—É—Ç

## –®–ê–ì 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å SQL –≤ Supabase (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

1. –û—Ç–∫—Ä–æ–π: **https://app.supabase.com/project/lvixtpatqrtuwhygtpjx/sql/new**
2. –°–∫–æ–ø–∏—Ä—É–π –í–ï–°–¨ —Ñ–∞–π–ª `database/victor_bot_v2_schema.sql`
3. –í—Å—Ç–∞–≤—å –≤ SQL Editor
4. –ù–∞–∂–º–∏ **RUN** (F5)
5. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úÖ "Success. No rows returned"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –¢–∞–±–ª–∏—Ü—ã ‚Üí –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è: `victor_inbox`, `victor_files`, `victor_observations`, `victor_processing_queue`

---

## –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```powershell
python test_victor_db_connection.py
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!
‚úÖ –¢–∞–±–ª–∏—Ü–∞ victor_inbox –Ω–∞–π–¥–µ–Ω–∞
‚úÖ –¢–∞–±–ª–∏—Ü–∞ victor_files –Ω–∞–π–¥–µ–Ω–∞
‚úÖ –¢–∞–±–ª–∏—Ü–∞ victor_observations –Ω–∞–π–¥–µ–Ω–∞
‚úÖ –¢–∞–±–ª–∏—Ü–∞ victor_processing_queue –Ω–∞–π–¥–µ–Ω–∞
‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –∏ —É–¥–∞–ª–µ–Ω–∞
‚úÖ –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
```

---

## –®–ê–ì 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä

```powershell
python main_victor_bot.py
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```
üöÄ Starting Victor Bot v2.0...
‚úÖ Background worker started
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

## –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª:

```powershell
curl http://localhost:8000/api/health
```

**–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:**
```json
{"status":"ok"}
```

---

## –®–ê–ì 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook –≤ Telegram

1. –ü–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ–π –¥–æ–º–µ–Ω:
```bash
curl -X POST "https://api.telegram.org/bot8457627946:AAEKY9QoV4yI8A9D5u6lJflralz480uazp8/setWebhook?url=https://–í–ê–®_–î–û–ú–ï–ù/api/telegram/webhook"
```

2. –ü—Ä–æ–≤–µ—Ä—å webhook:
```bash
curl "https://api.telegram.org/bot8457627946:AAEKY9QoV4yI8A9D5u6lJflralz480uazp8/getWebhookInfo"
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É —Ç–µ–∫—Å—Ç ‚Üí –¥–æ–ª–∂–µ–Ω —Å–ø—Ä–æ—Å–∏—Ç—å "–≠—Ç–æ –≤—Å—Ç—Ä–µ—á–∞, –∑–∞–¥–∞—á–∞, –∏–¥–µ—è –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥?"
2. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ ‚Üí –¥–æ–ª–∂–µ–Ω —Å–ø—Ä–æ—Å–∏—Ç—å "–ß—Ç–æ —ç—Ç–æ?"
3. –û—Ç–ø—Ä–∞–≤—å –≥–æ–ª–æ—Å–æ–≤–æ–µ ‚Üí –¥–æ–ª–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
SELECT * FROM victor_inbox ORDER BY created_at DESC LIMIT 10;
```

---

## ‚ùå –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å: `Get-Content .env | Select-String "DATABASE_URL"`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `DATABASE_URL=postgresql://postgres.lvixtpatqrtuwhygtpjx:Vika250775@aws-0-eu-central-1.pooler.supabase.com:5432/postgres`

### API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç: `netstat -ano | findstr :8000`
- –ï—Å–ª–∏ –∑–∞–Ω—è—Ç: –∏–∑–º–µ–Ω–∏ –≤ `.env` ‚Üí `API_PORT=8001`

### Telegram –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å webhook: `getWebhookInfo` (—Å–º. –≤—ã—à–µ)
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: —Å–º–æ—Ç—Ä–∏ –≤—ã–≤–æ–¥ `main_victor_bot.py`

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å Victor Bot v2.0 —Å–æ–±–∏—Ä–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ:
- ‚úÖ –¢–µ–∫—Å—Ç (–≤—Å—Ç—Ä–µ—á–∏, –∑–∞–¥–∞—á–∏, –∏–¥–µ–∏, —Ä–∞—Å—Ö–æ–¥—ã)
- ‚úÖ –§–æ—Ç–æ (—Å –≤–æ–ø—Ä–æ—Å–æ–º "—á—Ç–æ —ç—Ç–æ?")
- ‚úÖ –í–∏–¥–µ–æ (—Å –∑–∞–ø—Ä–æ—Å–æ–º –æ–ø–∏—Å–∞–Ω–∏—è)
- ‚úÖ –ê—É–¥–∏–æ/–ì–æ–ª–æ—Å (–æ—á–µ—Ä–µ–¥—å –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã (—É–º–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–∞)
- ‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏)
- ‚úÖ –ì–µ–æ–ø–æ–∑–∏—Ü–∏—è (–∞–≤—Ç–æ-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)

–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è!
