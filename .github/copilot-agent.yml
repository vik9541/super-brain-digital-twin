# GitHub Copilot Agent Configuration
# Super Brain Digital Twin - Automated Code Auditor
# Version: 1.0.0 | Created: 2025-12-11

name: SuperBrain-CodeAuditor
description: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç–æ—Ä –∫–æ–¥–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Super Brain Digital Twin

# –ú–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
models:
  primary:
    name: gpt-5.1-codex-max
    purpose: –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    temperature: 0.2  # –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
    
  secondary:
    name: claude-opus-4.5
    purpose: –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ Python –ª–æ–≥–∏–∫–∏ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
    temperature: 0.3
    
  infrastructure:
    name: claude-comer-4.5
    purpose: Kubernetes, Docker, YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    temperature: 0.2

# –¢—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞
triggers:
  - event: push
    branches:
      - main
      - develop
      - 'feature/**'
    paths:
      - '**.py'
      - '**.yaml'
      - '**.yml'
      - 'Dockerfile*'
      - 'k8s/**'
      - 'requirements*.txt'
      
  - event: pull_request
    actions:
      - opened
      - synchronize
      - reopened
      
  - event: schedule
    cron: '0 2 * * *'  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00 UTC (5:00 MSK)
    
  - event: workflow_dispatch  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

# –û–±–ª–∞—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
scan_targets:
  python_code:
    paths:
      - 'api/**/*.py'
      - 'modules/**/*.py'
      - '*.py'
      - 'tests/**/*.py'
    checks:
      - type_hints
      - error_handling
      - security_vulnerabilities
      - code_smells
      - performance
      - test_coverage
      - docstrings
      - imports_optimization
      
  kubernetes:
    paths:
      - 'k8s/**/*.yaml'
      - 'k8s/**/*.yml'
    checks:
      - resource_limits
      - security_context
      - health_probes
      - image_versions
      - rbac_config
      - network_policies
      - secrets_management
      
  docker:
    paths:
      - 'Dockerfile*'
    checks:
      - layer_optimization
      - security_best_practices
      - non_root_user
      - image_size
      - multistage_builds
      - vulnerabilities
      
  documentation:
    paths:
      - '**/*.md'
    checks:
      - broken_links
      - outdated_content
      - consistency
      - code_examples_validity

# –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
rules:
  # Python
  - id: PY001
    severity: error
    category: type_safety
    message: "–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å type hints"
    auto_fix: true
    
  - id: PY002
    severity: error
    category: security
    message: "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã hardcoded secrets –∏–ª–∏ credentials"
    auto_fix: false  # –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    
  - id: PY003
    severity: warning
    category: error_handling
    message: "–ë–ª–æ–∫ try-except —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∏–π, —É—Ç–æ—á–Ω–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è"
    auto_fix: false
    
  - id: PY004
    severity: error
    category: security
    message: "–í–æ–∑–º–æ–∂–Ω–∞—è SQL injection —É—è–∑–≤–∏–º–æ—Å—Ç—å"
    auto_fix: false
    
  - id: PY005
    severity: warning
    category: performance
    message: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π N+1 –∑–∞–ø—Ä–æ—Å"
    auto_fix: false
    
  - id: PY006
    severity: info
    category: documentation
    message: "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç docstring –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏"
    auto_fix: true
    
  - id: PY007
    severity: warning
    category: code_quality
    message: "–§—É–Ω–∫—Ü–∏—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è (cyclomatic complexity > 10)"
    auto_fix: false
    
  - id: PY008
    severity: info
    category: imports
    message: "–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç"
    auto_fix: true
    
  # Kubernetes
  - id: K8S001
    severity: error
    category: resources
    message: "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç resource limits/requests"
    auto_fix: true
    fix_template: |
      resources:
        requests:
          memory: "128Mi"
          cpu: "100m"
        limits:
          memory: "256Mi"
          cpu: "200m"
    
  - id: K8S002
    severity: error
    category: security
    message: "Security context –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (runAsNonRoot, readOnlyRootFilesystem)"
    auto_fix: true
    
  - id: K8S003
    severity: warning
    category: health
    message: "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç liveness –∏ readiness probes"
    auto_fix: true
    
  - id: K8S004
    severity: error
    category: versioning
    message: "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–≥ 'latest' –¥–ª—è Docker –æ–±—Ä–∞–∑–∞"
    auto_fix: false
    
  - id: K8S005
    severity: warning
    category: security
    message: "–°–µ–∫—Ä–µ—Ç—ã –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ Kubernetes Secrets, –∞ –Ω–µ –≤ ConfigMap"
    auto_fix: false
    
  # Docker
  - id: DOC001
    severity: warning
    category: optimization
    message: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ multi-stage builds –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞"
    auto_fix: false
    
  - id: DOC002
    severity: error
    category: security
    message: "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
    auto_fix: true
    fix_template: |
      RUN adduser -D -u 1000 appuser
      USER appuser
    
  - id: DOC003
    severity: info
    category: optimization
    message: "–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ COPY –∫–æ–º–∞–Ω–¥, –∫—ç—à –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å"
    auto_fix: true

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
auto_fix:
  enabled: true
  confidence_threshold: 0.85  # –ü—Ä–∏–º–µ–Ω—è—Ç—å auto-fix —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å >= 85%
  
  # –ß—Ç–æ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å
  allowed_categories:
    - type_safety
    - code_formatting
    - imports
    - documentation
    - simple_refactoring
    
  # –ß—Ç–æ –ù–ï–õ–¨–ó–Ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å (—Ç—Ä–µ–±—É–µ—Ç review)
  forbidden_categories:
    - security
    - architecture
    - business_logic
    - breaking_changes
    
  # –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç –¥–ª—è auto-fix
  create_commit: true
  commit_message: "ü§ñ Auto-fix: {rule_id} - {message}"
  
  # –°–æ–∑–¥–∞–≤–∞—Ç—å PR –¥–ª—è review –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
  create_pull_request: true
  pr_title: "ü§ñ [CodeAuditor] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
  pr_labels:
    - auto-fix
    - code-quality
    - needs-review

# –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
reporting:
  # –°–æ–∑–¥–∞–≤–∞—Ç—å issue –¥–ª—è –∫–∞–∂–¥–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã
  create_issues:
    enabled: true
    severity_threshold: error  # –°–æ–∑–¥–∞–≤–∞—Ç—å issue —Ç–æ–ª—å–∫–æ –¥–ª—è error
    labels:
      - bug
      - code-quality
      - needs-attention
    assignees:
      - vik9541
    
  # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ PR
  pr_comments:
    enabled: true
    style: grouped  # grouped | inline
    collapse_minor: true  # –°–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è
    
  # –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏
  status_check:
    enabled: true
    block_merge_on: error  # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å merge –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ error
    
  # –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
  weekly_report:
    enabled: true
    schedule: '0 9 * * 1'  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00 UTC (12:00 MSK)
    recipients:
      - vik9541
    include_metrics: true

# –ò—Å–∫–ª—é—á–µ–Ω–∏—è
exclusions:
  paths:
    - 'tests/**/*'  # –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∞–≤–∏–ª–∞–º
    - 'docs/**/*'
    - '*.md'
    - '.github/**/*'
    - 'CREDENTIALS/**/*'  # –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    - 'node_modules/**/*'
    - 'venv/**/*'
    - '__pycache__/**/*'
    
  rules:
    # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
    - path: 'batch_analyzer.py'
      disabled_rules:
        - PY007  # –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ–ø—É—Å—Ç–∏–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
        
    - path: 'api/main.py'
      disabled_rules:
        - PY006  # FastAPI endpoints –º–æ–≥—É—Ç –Ω–µ –∏–º–µ—Ç—å docstring

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
integrations:
  # Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  slack:
    enabled: false
    webhook_url: ${SLACK_WEBHOOK_URL}
    notify_on:
      - error
      - critical
      
  # GitHub Projects
  github_projects:
    enabled: true
    project_id: ${GITHUB_PROJECT_ID}
    auto_add_issues: true
    
  # Prometheus –º–µ—Ç—Ä–∏–∫–∏
  metrics:
    enabled: true
    endpoint: /metrics
    labels:
      project: super-brain
      component: code-auditor

# –õ–∏–º–∏—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
limits:
  max_files_per_run: 100
  max_file_size_mb: 5
  timeout_seconds: 300
  max_concurrent_scans: 3

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging:
  level: INFO
  format: json
  include_timestamps: true
  log_to_file: true
  file_path: .github/logs/copilot-agent.log

# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata:
  version: 1.0.0
  created_by: vik9541
  created_at: 2025-12-11T13:00:00+03:00
  last_updated: 2025-12-11T13:00:00+03:00
  documentation: https://github.com/vik9541/super-brain-digital-twin/blob/main/.github/COPILOT_AGENT_GUIDE.md